"UnlitGeneric" {
    //==============================================================
    // DIGIT SEPERATION VARIABLES
    //==============================================================
    "$digit" 0.0
	
	"$leading" 0.0
	"$leading_check" 0.0

	"$lt" 9999.0
	"$gt" -1.0
    
    $isCorrectSizeA 0
    $isCorrectSizeB 0
    $isCorrectSize 0

    //==============================================================
    // UPDATE RATE VARIABLES
    //==============================================================
    $framerate 30
    $fullframe 0

    $time 0
    $oldtime 0
    $interval 0
    $const_interval 0
    $update 0
    
    //==============================================================
    // SPEEDO CALCULATION VARIABLES
    //==============================================================
    $speed 0

    //==============================================================
    // COLOR VARIABLES
    //==============================================================  
    $colorMain  "{ 255 255 255 }" // default color
    $color      $colorMain

    //==============================================================
	
	Proxies {
    //==============================================================
    // UPDATE RATE
    //==============================================================
        // get const_interval
        // const_interval = 1/framerate
        Divide {
            srcVar1 "$1"
            srcVar2 "$framerate"
            resultVar "$const_interval"
        }

        // Reset oldtime on new map
        // if(oldtime>time){oldtime=0}
        LessOrEqual {
            srcVar1         "$oldtime"
            srcVar2         "$time"
            resultVar       "$oldtime"
            greaterVar      "$0"
            lessEqualVar    "$oldtime"
        }

		// Get current time
		CurrentTime { resultVar $time }

		// Calculate current interval
        // interval = time - oldtime
		Subtract { srcVar1 $time srcVar2 $oldtime resultVar $interval }

		// Sets $update to 1 if it's time to update
        // if(interval>const_interval){update=1}
        LessOrEqual {
            srcVar1         "$interval"
            srcVar2         "$const_interval"
            resultVar       "$update"
            greaterVar      "$1"
            lessEqualVar    "$0"
        }
    
		// Save current time if updating
        // if(update==1){oldtime=time}
        LessOrEqual {
            srcVar1         "$update"
            srcVar2         "$0"
            resultVar       "$oldtime"
            greaterVar      "$time"
            lessEqualVar    "$oldtime"
        }
        
    //==============================================================
    // ABSOLUTE SPEED
    //==============================================================
        // get player absolute velocity
        PlayerSpeed { scale 1 resultVar "$speed" }

        // clamp speed
        "Clamp"
        {
            "min"                                                   "0"
            "max"                                                   "3500"
            "srcVar1"                                               "$speed"
            "resultVar"                                             "$speed"
        }

    //==============================================================
    // UPDATE FRAME
    //==============================================================
        // change display value if updating
        // if(update==1){fullframe=speed}
        LessOrEqual {
            srcVar1         "$update"
            srcVar2         "$0"
            resultVar       "$fullframe"
            greaterVar      "$speed"
            lessEqualVar    "$fullframe"
        }
        Equals {
            srcVar1 "$fullframe"
            resultVar "$frame"
        }

    //==============================================================
    // ROUNDING
    //==============================================================
        // $frame = $frame/10
        Divide { srcVar1 "$frame" srcVar2 "$roundAmount" resultVar "$frame" }
        // discard decimals of $frame
        Int { srcVar1 "$frame" resultVar "$frame"}
        // $frame = $frame*10
		Multiply { srcVar1 "$frame" srcVar2 "$roundAmount" resultVar "$frame" }
    
    //==============================================================
    // COLORS
    //==============================================================
        // BASE
        // default to white if none of the below conditions are met
        //--------------------------------------------------------------
        Equals {
            srcVar1     "$colorMain"
            resultVar   "$color"
        }

        //==============================================================
        // CLOSE
        // if(speed>closeMin && speed<closeMax)
        //--------------------------------------------------------------
        LessOrEqual {
            srcVar1         "$frame"
            srcVar2         "$closeMin"
            resultVar       "$isAboveCloseMin"
            greaterVar      "$1"
            lessEqualVar    "$0"
        }
        LessOrEqual {
            srcVar1         "$frame"
            srcVar2         "$closeMax"
            resultVar       "$isBelowCloseMax"
            greaterVar      "$0"
            lessEqualVar    "$1"
        }
        Multiply {
            srcVar1     "$isAboveCloseMin"
            srcVar2     "$isBelowCloseMax"
            resultVar   "$isClose"
        }
        LessOrEqual {
            srcVar1         "$isClose"
            srcVar2         "$0"
            resultVar       "$color"
            greaterVar      "$colorClose"
            lessEqualVar    "$color"
        }

        //==============================================================
        // GOOD
        // if(speed>goodMin && speed<goodMax)
        //--------------------------------------------------------------
        LessOrEqual {
            srcVar1         "$frame"
            srcVar2         "$goodMin"
            resultVar       "$isAboveGoodMin"
            greaterVar      "$1"
            lessEqualVar    "$0"
        }
        LessOrEqual {
            srcVar1         "$frame"
            srcVar2         "$goodMax"
            resultVar       "$isBelowGoodMax"
            greaterVar      "$0"
            lessEqualVar    "$1"
        }
        Multiply {
            srcVar1     "$isAboveGoodMin"
            srcVar2     "$isBelowGoodMax"
            resultVar   "$isGood"
        }
        LessOrEqual {
            srcVar1         "$isGood"
            srcVar2         "$0"
            resultVar       "$color"
            greaterVar      "$colorGood"
            lessEqualVar    "$color"
        }

        //==============================================================
        // ABOVE
        // if(speed>aboveMin && speed<aboveMax)
        //--------------------------------------------------------------
        LessOrEqual {
            srcVar1         "$frame"
            srcVar2         "$closeMinB"
            resultVar       "$isAboveCloseMinB"
            greaterVar      "$1"
            lessEqualVar    "$0"
        }
        LessOrEqual {
            srcVar1         "$frame"
            srcVar2         "$closeMaxB"
            resultVar       "$isBelowCloseMaxB"
            greaterVar      "$0"
            lessEqualVar    "$1"
        }
        Multiply {
            srcVar1     "$isAboveCloseMinB"
            srcVar2     "$isBelowCloseMaxB"
            resultVar   "$isCloseB"
        }
        LessOrEqual {
            srcVar1         "$isCloseB"
            srcVar2         "$0"
            resultVar       "$color"
            greaterVar      "$colorClose"
            lessEqualVar    "$color"
        }
    //==============================================================
    // DIGIT SEPERATION
    //==============================================================
    // Check if speed is the right size (eg; if digit is _4k, check if the speed is 4 digits long)
        // if($frame<$lt){ $isCorrectSizeA = 1}
        LessOrEqual {
            srcVar1         "$frame"
            srcVar2         "$lt"
            resultVar       "$isCorrectSizeA"
            greaterVar      "$0"
            lessEqualVar    "$1"
        }
        // if($frame>$gt){ $isCorrectSizeB = 1}
        LessOrEqual {
            srcVar1         "$frame"
            srcVar2         "$gt"
            resultVar       "$isCorrectSizeB"
            greaterVar      "$1"
            lessEqualVar    "$0"
        }
        // if($isCorrectSizeA && $isCorrectSizeB){ $isCorrectSize = 1}
        Multiply{srcVar1 $isCorrectSizeA srcVar2 $isCorrectSizeB resultVar $isCorrectSize}
    
    // Find digit value (eg; if digit is d3, find the value of the speed in the hundreds place)
        // $frame = $frame/$digit
        Divide {
            srcVar1         "$frame"
            srcVar2         "$digit"
            resultVar       "$frame"
        }
        // Discard decimals of $frame
        Int { srcVar1 $frame resultVar $frame }
        // $leading = $frame/10
        Divide {
            srcVar1         "$frame"
            srcVar2         "$10"
            resultVar       "$leading"
        }
        // Discard decimals of $leading
        Int { srcVar1 $leading resultVar $leading }
        // $leading = $leading * 10
        Multiply {
            srcVar1         "$leading"
            srcVar2         "$10"
            resultVar       "$leading"
        }
        // $frame = $frame - $leading
        Subtract {
            srcVar1         "$frame"
            srcVar2         "$leading"
            resultVar       "$frame"
        }

        // if($isCorrectSize){ $frame = $frame } else { $frame = 10 (invisible) }
        LessOrEqual {
            srcVar1         "$isCorrectSize"
            srcVar2         "$0"
            resultVar       "$frame"
            greaterVar      "$frame"
            lessEqualVar    "$10"
        }
	}
}